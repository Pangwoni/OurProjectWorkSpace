<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.spring5legacy.mypro00.mapper.MyMemberMapper">

<resultMap type="com.spring5legacy.mypro00.domain.MyAuthorityVO" id="authMap">
   <result property="userid" column="userid"/>
   <result property="authority" column="authority"/>
</resultMap>
<resultMap type="com.spring5legacy.mypro00.domain.MyMemberVO" id="memberMap">
   <result property="userid" column="userid"/>
   <result property="userpw" column="userpw"/>
   <result property="username" column="username"/>
   <result property="mregDate" column="mregDate"/>
   <result property="mmodDate" column="mmodDate"/>
   <result property="mdropFlag" column="mdropFlag"/>
   <result property="enabled" column="enabled"/>
   <collection property="authList" resultMap="authMap"/>
</resultMap>

<select id="selectMember" resultMap="memberMap">
SELECT a.USERID, a.USERPW, a.USERNAME, a.MREGDATE, a.MMODDATE, a.MDRPFLAG, a.ENABLED, b.AUTHORITY
FROM myuser.tbl_mymember a LEFT OUTER JOIN myuser.TBL_MYMEMBER_AUTHORITIES b
    ON (a.userid = b.userid)
WHERE a.userid = #{userid}
</select>

<insert id="insertMember">
   INSERT INTO myuser.tbl_mymember
   VALUES(#{userid},#{userpw},#{username},DEFAULT,DEFAULT,DEFAULT,DEFAULT)
</insert>
<insert id="insertMemberAuth">
   INSERT INTO myuser.TBL_MYMEMBER_AUTHORITIES
   VALUES(#{userid},#{authority})
</insert>




</mapper>